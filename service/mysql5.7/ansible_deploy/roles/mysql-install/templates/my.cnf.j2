[client]
port={{ port }}
socket={{ mysql_data_dir }}/{{ port }}/logs/mysql.sock
default-character-set=utf8

[mysqld]
datadir={{ mysql_data_dir }}/{{ port }}/mysql_data
socket={{ mysql_data_dir }}/{{ port }}/logs/mysql.sock
pid_file={{ mysql_data_dir }}/{{ port }}/logs/mysql.pid
user=mysql
port={{ port }}

character-set-server='utf8'
collation-server='utf8_general_ci'
skip-external-locking
key_buffer_size = 16M
max_allowed_packet = 1024M
table_open_cache = 1024
sort_buffer_size = 512K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M
max_connections=1024
max_connect_errors=20000
innodb_flush_log_at_trx_commit=2
innodb_log_buffer_size=512M
innodb_buffer_pool_size=4G
innodb_autoextend_increment=128
innodb_log_file_size=2G
innodb_thread_concurrency=8
innodb_flush_method=O_DIRECT
thread_cache_size=8
symbolic-links=0
sql_mode='NO_AUTO_CREATE_USER'
wait_timeout=300

[mysqld_safe]
log-error={{ mysql_data_dir }}/{{ port }}/logs/mysqld.log